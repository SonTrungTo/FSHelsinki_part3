{"version":3,"sources":["components/Person.js","components/Persons.js","components/Filter.js","components/PersonForm.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Name","person","buttonDelete","Fragment","name","number","onClick","Persons","props","persons","map","Filter","value","onChange","handleChange","PersonForm","onSubmit","handleSubmit","valueNewName","handleChangeName","valueNewNumber","handleChangeNumber","type","baseUrl","personsService","getAll","axios","get","then","response","data","create","newPerson","post","remove","id","delete","update","put","Notification","message","classState","isSuccess","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","nameFilter","setNameFilter","setMessage","setIsSuccess","useEffect","list","displayErrorMessage","error","setTimeout","displaySuccessMessage","personsToShow","length","filter","toLowerCase","includes","event","target","preventDefault","indexOf","trim","returnedPerson","concat","catch","window","confirm","find","updatedPerson","updatedP","p","requestedPerson","removedPerson","newPersons","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.385fc9eb.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default function Name({person, buttonDelete}) {\n    return (\n        <React.Fragment>\n            <span>{person.name} {person.number}</span>\n            <button onClick={ buttonDelete(person) }>delete</button>\n            <br />\n        </React.Fragment>\n    );\n};","import React from \"react\";\nimport Person from \"./Person\";\n\nexport default function Persons(props) {\n    return (\n        <div>\n            { props.persons.map(person => \n            <Person key={person.name} person={ person }\n            buttonDelete={ props.buttonDelete } />\n            ) }\n        </div>\n    );\n}","import React from \"react\";\n\nexport default function Filter(props) {\n    return (\n        <div>\n            filter shown with <input value={ props.value }\n            onChange={ props.handleChange } />\n        </div>\n    );\n};","import React from \"react\";\n\nexport default function PersonForm(props) {\n      return (\n        <form onSubmit={ props.handleSubmit }>\n            <div>\n                name: <input value={ props.valueNewName }\n                onChange={ props.handleChangeName } />\n            </div>\n            <div>\n                number: <input value={ props.valueNewNumber }\n                onChange={ props.handleChangeNumber } />\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n      );\n};","import axios from \"axios\";\nconst baseUrl = '/api/persons'; /* start this with server in part 3, for json-server, change into '/persons' */\nlet personsService = {};\n\nconst getAll = () => {\n    return axios.get(baseUrl)\n    .then(response => response.data);\n};\n\nconst create = (newPerson) => {\n    return axios.post(baseUrl, newPerson)\n    .then(response => response.data);\n};\n\nconst remove = (id) => {\n    return axios.delete(`${baseUrl}/${id}`)\n    .then(response => response.data);\n};\n\nconst update = (id, newPerson) => {\n    return axios.put(`${baseUrl}/${id}`, newPerson)\n    .then(response => response.data);\n};\n\npersonsService = { getAll, create, remove, update };\nexport default personsService;","import React from \"react\";\n\nexport default function Notification({ message, isSuccess }) {\n    const classState = isSuccess ? \"success\" : \"error\";\n    if (message === null) {\n        return null;\n    }\n\n    return (\n        <div className={ classState }>\n            { message }\n        </div>\n    );\n};","import React, { useState, useEffect } from \"react\";\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport personsService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nexport default function App() {\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState('');\n    const [newNumber, setNewNumber] = useState('');\n    const [nameFilter, setNameFilter] = useState('');\n    const [message, setMessage] = useState(null);\n    const [isSuccess, setIsSuccess] = useState(false);\n\n    useEffect(() => {\n        personsService.getAll()\n        .then(list => {\n            setPersons(list);\n        });\n    }, []);\n\n    const handleChangeName = (event) => {\n        setNewName(event.target.value);\n    };\n    const handleChangeNumber = (event) => {\n        setNewNumber(event.target.value);\n    };\n    const handleChangeFilter = (event) => {\n        setNameFilter(event.target.value);\n    };\n    const displayErrorMessage = (error) => {\n        let message = error.response.data.error;\n        setMessage(message);\n        setTimeout(() => {\n            setMessage(null);\n        }, 5000);\n    };\n    const displaySuccessMessage = (message) => {\n        setMessage(message);\n        setIsSuccess(true);\n        setTimeout(() => {\n            setMessage(null);\n            setIsSuccess(false);\n        }, 5000);\n    };\n    const clickSubmit = (event) => {\n        event.preventDefault();\n        if (persons.map(person => person.name).indexOf(newName.trim()) !== -1) {\n            const isUpdated = window.confirm(`${newName} is already added to phonebook, `\n            + 'replace the old number with a new one?');\n            if (isUpdated) {\n                const person = persons.find(person => person.name === newName.trim());\n                const updatedPerson = {...person, number: newNumber};\n                personsService.update(person.id, updatedPerson)\n                .then(updatedP => {\n                    setPersons(persons.map(p => p.id !== person.id ? p : updatedP));\n                    setNewName('');\n                    setNewNumber('');\n                    displaySuccessMessage(`Updated ${updatedP.name}`);\n                })\n                .catch(error => {\n                    displayErrorMessage(error);\n                });\n            }\n            return;\n        }\n        const newPerson={name: newName, number: newNumber};\n        personsService.create(newPerson)\n        .then(returnedPerson => {\n            setPersons(persons.concat(returnedPerson));\n            setNewName('');\n            setNewNumber('');\n            displaySuccessMessage(`Added ${returnedPerson.name}`);\n        })\n        .catch(error => {\n            displayErrorMessage(error);\n        });\n    };\n    const clickDelete = requestedPerson => event => {\n        const isDeleted = window.confirm(`Delete ${requestedPerson.name}?`);\n        if (isDeleted) {\n            personsService.remove(requestedPerson.id)\n            .then(removedPerson => {\n                // This is one of the weird stuffs of Axios, why response.data is an empty Object?\n                const newPersons = persons.filter(person => person.id !== requestedPerson.id);\n                setPersons(newPersons);\n                displaySuccessMessage(`Deleted ${requestedPerson.name}`);\n            })\n            .catch(error => {\n                displayErrorMessage(error);\n            });\n        }\n    };\n    const personsToShow = nameFilter.length === 0 ? persons :\n        persons.filter(person => person.name.toLowerCase().includes(nameFilter.toLowerCase()));\n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Notification message={ message } isSuccess={ isSuccess } />\n            <Filter value={ nameFilter } handleChange={ handleChangeFilter } />\n            <h3>add a new</h3>\n            <PersonForm handleSubmit={ clickSubmit }\n            valueNewName={ newName } handleChangeName={ handleChangeName }\n            valueNewNumber={ newNumber } handleChangeNumber={ handleChangeNumber } />\n            <h3>Numbers</h3>\n            <Persons persons={ personsToShow }\n            buttonDelete={ clickDelete } />\n        </div>\n    );\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}