(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),u=t.n(a),r=t(15),o=t.n(r),i=(t(21),t(6)),s=t(3);function l(e){var n=e.person,t=e.buttonDelete;return Object(c.jsxs)(u.a.Fragment,{children:[Object(c.jsxs)("span",{children:[n.name," ",n.number]}),Object(c.jsx)("button",{onClick:t(n),children:"delete"}),Object(c.jsx)("br",{})]})}function d(e){return Object(c.jsx)("div",{children:e.persons.map((function(n){return Object(c.jsx)(l,{person:n,buttonDelete:e.buttonDelete},n.name)}))})}function b(e){return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{value:e.value,onChange:e.handleChange})]})}function j(e){return Object(c.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.valueNewName,onChange:e.handleChangeName})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:e.valueNewNumber,onChange:e.handleChangeNumber})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})}var h=t(4),f=t.n(h),m="/api/persons",O={getAll:function(){return f.a.get(m).then((function(e){return e.data}))},create:function(e){return f.a.post(m,e).then((function(e){return e.data}))},remove:function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))}};function v(e){var n=e.message,t=e.isSuccess?"success":"error";return null===n?null:Object(c.jsx)("div",{className:t,children:n})}function p(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],u=n[1],r=Object(a.useState)(""),o=Object(s.a)(r,2),l=o[0],h=o[1],f=Object(a.useState)(""),m=Object(s.a)(f,2),p=m[0],x=m[1],g=Object(a.useState)(""),w=Object(s.a)(g,2),N=w[0],C=w[1],S=Object(a.useState)(null),k=Object(s.a)(S,2),D=k[0],y=k[1],A=Object(a.useState)(!1),E=Object(s.a)(A,2),J=E[0],L=E[1];Object(a.useEffect)((function(){O.getAll().then((function(e){u(e)}))}),[]);var T=function(e){var n=e.response.data.error;y(n),setTimeout((function(){y(null)}),5e3)},B=function(e){y(e),L(!0),setTimeout((function(){y(null),L(!1)}),5e3)},F=0===N.length?t:t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(v,{message:D,isSuccess:J}),Object(c.jsx)(b,{value:N,handleChange:function(e){C(e.target.value)}}),Object(c.jsx)("h3",{children:"add a new"}),Object(c.jsx)(j,{handleSubmit:function(e){if(e.preventDefault(),-1===t.map((function(e){return e.name})).indexOf(l.trim())){var n={name:l,number:p};O.create(n).then((function(e){u(t.concat(e)),h(""),x(""),B("Added ".concat(e.name))})).catch((function(e){T(e)}))}else{if(window.confirm("".concat(l," is already added to phonebook, ")+"replace the old number with a new one?")){var c=t.find((function(e){return e.name===l.trim()})),a=Object(i.a)(Object(i.a)({},c),{},{number:p});O.update(c.id,a).then((function(e){u(t.map((function(n){return n.id!==c.id?n:e}))),h(""),x(""),B("Updated ".concat(e.name))})).catch((function(e){T(e)}))}}},valueNewName:l,handleChangeName:function(e){h(e.target.value)},valueNewNumber:p,handleChangeNumber:function(e){x(e.target.value)}}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(d,{persons:F,buttonDelete:function(e){return function(n){window.confirm("Delete ".concat(e.name,"?"))&&O.remove(e.id).then((function(n){var c=t.filter((function(n){return n.id!==e.id}));u(c),B("Deleted ".concat(e.name))})).catch((function(e){T(e)}))}}})]})}o.a.render(Object(c.jsx)(u.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.385fc9eb.chunk.js.map